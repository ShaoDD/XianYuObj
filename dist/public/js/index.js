define(["jquery","fastClick","Layer","IO"],function(a,n,t,o){function l(){var n=new Date,t=n.getFullYear(),o=a(".month-select").val();return 2==o?t%4==0?29:28:1==o||3==o||5==o||7==o||8==o||10==o||12==o?31:30}a(function(){a("#day2").focus();var n=new Date,t=n.getMonth()+1;a(".month-select").val(t)}),a(".month").click(function(){"2"==a(".month:checked").val()?a(".working-days").show():a(".working-days").hide()}),a(".confirm-btn").click(function(){var n=a(".month:checked").val(),o=a(".base-input").val();if(!o)return void t.alert("请填写基本工资");o=parseInt(o);var r=!0;a(".add-input").each(function(){a(this).val()||(r=!1)});var i=!0;a(".off-input").each(function(){a(this).val()||(i=!1)});var u=a(".late-input").val();if(!u)return void t.alert("请填写迟到扣款");u=parseInt(u);var e=a(".other-input").val();if(!e)return void t.alert("请填写其他扣款");e=parseInt(e);var v=a(".otherAdd-input").val();if(!v)return void t.alert("请填写其他增加");v=parseInt(v);var f=l(),s=Math.floor(o/f*100)/100,d=Math.floor(s/8*100)/100,c=Math.floor(d/60*100)/100;if(r){var h=s*parseInt(a(".add-input-day").val())+d*parseInt(a(".add-input-hours").val())+c*parseInt(a(".add-input-minutes").val());h=Math.floor(h)}else t.alert("请填写加班时间");if(i){var p=s*parseInt(a(".off-input-day").val())+d*parseInt(a(".off-input-hours").val())+c*parseInt(a(".off-input-minutes").val());p=Math.floor(p)}else t.alert("请填写请假时间");var y;if(2==n){var m=a(".day-input").val();m?(m=parseInt(m),y=Math.floor(s*m+h+v-p-u-e)):t.alert("请填写在职天数")}else y=Math.floor(o+h+v-p-u-e);a(".add-salary").html(h),a(".off-salary").html(p),a(".total-salary").html(y)}),a(document).keydown(function(n){13==n.keyCode&&(a("#min2").is(":focus")?(a(".add-btn").click(),a("#day2").focus()):a("#hour2").is(":focus")?a("#min2").focus():a("#day2").is(":focus")?a("#hour2").focus():a(".add-input-day").is(":focus")?a(".add-input-hours").focus():a(".add-input-hours").is(":focus")?a(".add-input-minutes").focus():a(".add-input-minutes").is(":focus")?a(".off-input-day").focus():a(".off-input-day").is(":focus")?a(".off-input-hours").focus():a(".off-input-hours").is(":focus")&&a(".off-input-minutes").focus())}),a(".add-btn").click(function(){var n=a("#min1").val(),t=a("#hour1").val(),o=a("#day1").val(),l=a("#min2").val(),r=a("#hour2").val(),i=a("#day2").val();""==n&&(n=0),""==t&&(t=0),""==o&&(o=0),""==l&&(l=0),""==r&&(r=0),""==i&&(i=0),n=parseInt(n),t=parseInt(t),o=parseInt(o),l=parseInt(l),r=parseInt(r),i=parseInt(i);var u=o+i,e=t+r,v=n+l;v>=60&&(e+=Math.floor(v/60),v-=60*Math.floor(v/60)),e>=8&&(u+=Math.floor(e/8),e-=8*Math.floor(e/8)),a("#min1").val(v),a("#hour1").val(e),a("#day1").val(u),a("#min2").val(""),a("#hour2").val(""),a("#day2").val(""),a("#min3").val(n),a("#hour3").val(t),a("#day3").val(o)}),a(".clear-btn").click(function(){a("#min3").val(parseInt(a("#min1").val())),a("#hour3").val(parseInt(a("#hour1").val())),a("#day3").val(parseInt(a("#day1").val())),a("#min1").val(0),a("#hour1").val(0),a("#day1").val(0),a("#min2").val(""),a("#hour2").val(""),a("#day2").val("")}),a(".return-btn").click(function(){a("#min1").val(parseInt(a("#min3").val())),a("#hour1").val(parseInt(a("#hour3").val())),a("#day1").val(parseInt(a("#day3").val()))}),a(".next-add-btn").click(function(){a(".add-input-day").val(a("#day1").val()),a(".add-input-hours").val(a("#hour1").val()),a(".add-input-minutes").val(a("#min1").val())}),a(".next-off-btn").click(function(){a(".off-input-day").val(a("#day1").val()),a(".off-input-hours").val(a("#hour1").val()),a(".off-input-minutes").val(a("#min1").val())})});